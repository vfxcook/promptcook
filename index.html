<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PromptCook Admin</title>
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50">
    <header class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 py-6 flex justify-between items-center">
            <h1 class="text-3xl font-bold text-blue-600">PromptCook Admin</h1>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 py-8">
        <section class="mb-8 p-6 bg-white rounded-lg shadow-md">
            <h2 class="text-xl font-semibold mb-4">Add New Prompt</h2>
            <form id="addPromptForm">
                <input type="text" id="promptTitle" placeholder="Title" class="w-full p-3 border rounded-lg mb-4" required>
                <textarea id="promptText" rows="4" placeholder="Prompt Text" class="w-full p-3 border rounded-lg mb-4" required></textarea>
                <input type="text" id="promptImage" placeholder="Image URL (Optional)" class="w-full p-3 border rounded-lg mb-4">
                <button type="submit" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600">
                    Add Prompt
                </button>
            </form>
        </section>

        <section>
            <h2 class="text-2xl font-bold mb-6">All Prompts</h2>
            <div id="promptsList" class="space-y-4"></div>
        </section>
    </main>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

        const firebaseConfig = { /* Same config as index.html */ };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const addPromptForm = document.getElementById('addPromptForm');
        const promptsList = document.getElementById('promptsList');

        addPromptForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const title = document.getElementById('promptTitle').value;
            const promptText = document.getElementById('promptText').value;
            const promptImage = document.getElementById('promptImage').value;

            await addDoc(collection(db, "prompts"), { title, prompt: promptText, image: promptImage });
            addPromptForm.reset();
        });

        onSnapshot(collection(db, "prompts"), (snapshot) => {
            promptsList.innerHTML = "";
            snapshot.forEach(doc => {
                const data = doc.data();
                promptsList.innerHTML += `<div>${data.title} - ${data.prompt} <img src="${data.image || ''}" class="max-w-xs mt-2"></div>`;
            });
        });
    </script>
</body>
</html>

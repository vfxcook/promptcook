<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - AI Prompt Generator</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js"></script>
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50">

    <h1 class="text-center text-3xl font-bold mt-6 text-blue-600">Admin - Add AI Prompt</h1>

    <div class="max-w-2xl mx-auto mt-6 p-6 bg-white shadow-lg rounded-lg">
        <input type="text" id="promptTitle" placeholder="Title" class="w-full p-3 border rounded-lg mb-4">
        <textarea id="promptText" rows="4" placeholder="Prompt with placeholders (e.g. A <product> on a <place> at <time>)" class="w-full p-3 border rounded-lg mb-4"></textarea>
        <input type="text" id="tags" placeholder="Enter tags (comma separated, e.g. product,place,time)" class="w-full p-3 border rounded-lg mb-4">
        <button onclick="uploadPrompt()" class="w-full bg-blue-500 text-white px-4 py-2 rounded-lg">Submit</button>
    </div>

    <script>
        // ✅ Initialize Firebase properly
        const firebaseConfig = {
            apiKey: "AIzaSyDQz9IloW02h5fyBe8onrnQ45kAK8YT2eU",
            authDomain: "promptcook.firebaseapp.com",
            projectId: "promptcook",
            storageBucket: "promptcook.appspot.com",
            messagingSenderId: "629727878561",
            appId: "1:629727878561:web:a20882f86dad45e7a6bfe0"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // ✅ Function to upload prompt to Firestore
        function uploadPrompt() {
            let title = document.getElementById("promptTitle").value.trim();
            let promptText = document.getElementById("promptText").value.trim();
            let tags = document.getElementById("tags").value.split(",").map(tag => tag.trim());

            if (!title || !promptText || tags.length === 0) {
                alert("Please fill out all fields.");
                return;
            }

            db.collection("prompts").add({
                title: title,
                prompt: promptText,
                tags: tags,
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
            }).then(() => {
                alert("Prompt added successfully!");
                document.getElementById("promptTitle").value = "";
                document.getElementById("promptText").value = "";
                document.getElementById("tags").value = "";
            }).catch(error => {
                console.error("Error adding prompt:", error);
                alert("Error adding prompt. Check console.");
            });
        }
    </script>

</body>
</html>
